<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description"
        content="Signal Genius AI - Transparent signal record system. Shows historical snapshots, not live recommendations.">
    <title>Signal Genius AI - Signal Record</title>

    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="./favicon.svg">

    <!-- Access Gate -->
    <script src="./gate.js"></script>

    <!-- Styles -->
    <link rel="stylesheet" href="./style.css">
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
</head>

<body>
    <!-- Main Content -->
    <main class="container">
        <div class="header-content">
            <h1 class="brand-name">Signal Genius <span class="ai-badge">AI</span></h1>
        </div>



        <!-- Tab Navigation -->
        <nav class="tab-nav">
            <button class="tab-btn active" onclick="switchTab('active')">üéØ Active Signal</button>
            <!-- <button class="tab-btn" onclick="switchTab('history')">üìú History</button> -->
        </nav>

        <!-- Content Sections -->
        <div id="active-tab" class="tab-content active">
            <!-- STATE 3: Market Closed -->
            <div id="market-closed" class="bento-card signal-card hidden animate-in closed-state">
                <div class="card-section header-section">
                    <div class="header-row-flex">
                        <div class="main-title">üü¶ STATE ‚Äî MARKET CLOSED</div>
                        <div class="sub-title">Market Status: Closed</div>
                    </div>
                </div>
                <div class="card-section main-info">
                    <div class="closed-icon">üåë</div>
                    <h2 class="closed-title">The Forex market is currently closed.</h2>
                    <p class="closed-desc">Quantix operates only during live market hours.<br>No signals are generated
                        when the market is closed.</p>
                </div>
            </div>

            <!-- STATE 2: Signal Record (Latest) -->
            <div id="signal-record" class="bento-card signal-card hidden animate-in">
                <div class="card-section header-section">
                    <div class="header-row-flex">
                        <div class="main-title">Active Signal snapshot</div>
                        <div class="sub-title">Read-only ¬∑ Real-time</div>
                    </div>
                    <div class="meta-row-flex">
                        <div class="meta-block-vertical">
                            <span class="meta-label-vertical">Generated At:</span>
                            <span id="record-generated-at" class="meta-value-vertical">‚Äî</span>
                        </div>
                    </div>
                </div>

                <div class="divider"></div>

                <div class="card-section main-info">
                    <div class="asset-tf">
                        <span id="record-asset">EUR/USD</span>
                        <span class="separator">|</span>
                        <span id="record-tf">M15</span>
                    </div>
                    <div id="record-direction" class="direction-strength">
                        <span id="dir-text">üü¢ BUY</span>
                        <span id="strength-text"
                            style="font-size: 1rem; color: var(--text-secondary);">(Calculating)</span>
                    </div>
                </div>

                <div class="divider"></div>

                <div class="card-section levels-section-full">
                    <div class="level-item-wide">
                        <span class="icon">üéØ</span>
                        <span>Entry:</span>
                        <b id="record-entry">‚Äî</b>
                    </div>
                    <div class="level-item-wide">
                        <span class="icon">üí∞</span>
                        <span>TP:</span>
                        <b id="record-tp">‚Äî</b>
                    </div>
                    <div class="level-item-wide">
                        <span class="icon">üõë</span>
                        <span>SL:</span>
                        <b id="record-sl">‚Äî</b>
                    </div>
                </div>

                <div class="divider"></div>

                <div class="card-section analysis-grid">
                    <div class="analysis-item">
                        <span>‚≠ê Confidence:</span>
                        <b id="record-confidence">‚Äî</b>
                    </div>
                    <div class="analysis-item">
                        <span>üß† Strategy:</span>
                        <b id="record-strategy">Quantix AI</b>
                    </div>
                    <div class="analysis-item">
                        <span>‚è≥ Status:</span>
                        <b id="record-status-detailed">Waiting...</b>
                    </div>
                    <div class="analysis-item">
                        <span>üåä Range:</span>
                        <b id="record-volatility">Verified</b>
                    </div>
                </div>

                <div class="divider"></div>

                <div class="card-section action-section" style="display: flex; gap: 10px; padding: 15px 20px;">
                    <a id="tv-link-active" href="#" target="_blank" class="btn-secondary"
                        style="flex: 1; text-decoration: none; text-align: center; font-size: 0.8rem; padding: 8px; border: 1px solid var(--border-color); border-radius: 4px; color: var(--text-primary);">
                        üìà View on TradingView
                    </a>
                    <button id="copy-signal-btn" class="btn-secondary"
                        style="flex: 1; font-size: 0.8rem; padding: 8px; border: 1px solid var(--border-color); border-radius: 4px; background: transparent; color: var(--text-primary); cursor: pointer;">
                        üìã Copy Details
                    </button>
                </div>

                <div class="card-section" style="padding: 10px 20px;">
                    <p
                        style="font-size: 0.65rem; color: var(--text-secondary); font-style: italic; text-align: center; opacity: 0.7;">
                        "Proof of AI execution. Verify on TradingView using UTC."
                    </p>
                </div>
            </div>
        </div>

        <!-- History Content Area -->
        <div id="history-tab" class="tab-content">
            <h2
                style="font-size: 1.25rem; font-weight: 800; color: var(--text-primary); margin-bottom: 1rem; padding-left: 4px;">
                EUR/USD Signal History</h2>

            <!-- Filters (Streamlined) -->
            <div class="filters-wrapper-pro">
                <div class="outcome-tabs" id="filter-outcome-tabs">
                    <button class="outcome-tab" data-value="ALL">All</button>
                    <button class="outcome-tab active" data-value="PROFIT">Successful</button>
                    <button class="outcome-tab" data-value="LOSS">Not Successful</button>
                    <button class="outcome-tab" data-value="PENDING">Pending</button>
                    <button class="outcome-tab" data-value="CANCELLED">No Trade</button>
                </div>

                <div class="filter-group-mini">
                    <label for="filter-date"
                        style="font-size: 0.75rem; font-weight: 700; color: var(--text-secondary); text-transform: uppercase; margin-right: 8px;">Lookback:</label>
                    <select id="filter-date">
                        <option value="1">24h</option>
                        <option value="7" selected>7d</option>
                        <option value="30">30d</option>
                        <option value="0">All</option>
                    </select>
                </div>
            </div>

            <!-- Table -->
            <div class="table-wrapper">
                <table id="history-table">
                    <thead>
                        <tr>
                            <th>Date (UTC)</th>
                            <th>Side</th>
                            <th>Entry</th>
                            <th>SL</th>
                            <th>TP</th>
                            <th title="Risk : Reward Ratio">R:R</th>
                            <th>Outcome</th>
                            <th>Verify</th>
                        </tr>
                    </thead>
                    <tbody id="history-body">
                        <!-- History injected here -->
                    </tbody>
                </table>
            </div>

            <!-- Pagination -->
            <div id="pagination-wrapper" style="text-align:center; padding: 0 0 40px 0;">
                <button id="load-more-btn" class="action-btn" style="max-width:200px; margin:auto; display:none;">
                    Load More Signals
                </button>
            </div>

            <!-- Legal Footer for History Tab -->
            <div class="historical-note-fancy"
                style="margin-top: 2rem; padding: 1.5rem; border-top: 1px solid var(--border-color); opacity: 0.85;">
                <div style="font-size: 0.85rem; line-height: 1.6;">
                    <strong>üìã Historical Record Notice</strong><br>
                    <span style="opacity: 0.9;">
                        Signals shown are historical records from Quantix AI Core (read-only).<br>
                        Outcome labels are derived from Quantix lifecycle states.<br>
                        <strong>This is not financial advice.</strong> Trading involves risk.
                    </span>
                </div>
            </div>
        </div>

    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-content">
            <div class="footer-brand">Signal Genius AI ¬∑ Transparent Signal Record System</div>
            <div class="footer-disclaimer">
                <strong>"When you see nothing, the system is waiting. When you see a Signal Record, you're looking at
                    proof ‚Äî not a suggestion."</strong>
                <br><br>
                Signal Genius AI displays historical signal records for transparency only.
                <br>
                This is not financial advice. Trading involves risk. Users are fully responsible for their trading
                decisions.
                <br>
                <small style="opacity: 0.7;">Long periods with no signals are intentional. ¬© 2026 Signal Genius AI. All
                    rights reserved.</small>
            </div>
        </div>
    </footer>

    <!-- TradingView Inline Preview Modal -->
    <div id="tv-modal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modal-title">EURUSD ¬∑ M15 ¬∑ TradingView Preview</h3>
                <button onclick="closeTVModal()" class="close-btn">&times;</button>
            </div>
            <div class="modal-body">
                <div class="chart-container">
                    <iframe id="tv-iframe" src="" frameborder="0" allowfullscreen></iframe>
                </div>
                <div class="signal-details-sidebar">
                    <div class="detail-item">
                        <label>Entry</label>
                        <span id="modal-entry" class="mono">---</span>
                    </div>
                    <div class="detail-item">
                        <label>Stop Loss</label>
                        <span id="modal-sl" class="mono pulse-red">---</span>
                    </div>
                    <div class="detail-item">
                        <label>Take Profit</label>
                        <span id="modal-tp" class="mono pulse-green">---</span>
                    </div>
                    <div class="detail-item">
                        <label>UTC Time</label>
                        <span id="modal-utc" class="mono">---</span>
                    </div>
                    <div class="divider"></div>
                    <a id="modal-external-link" href="#" target="_blank" class="btn-primary"
                        style="text-decoration: none; text-align: center; display: block; padding: 10px; background: var(--primary-blue); color: #fff; border-radius: 6px; font-size: 0.85rem; font-weight: 700;">
                        Open in TradingView ‚Üó
                    </a>
                    <p class="modal-note">"Verify Entry, SL, and TP levels directly on the chart."</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script type="module" src="./signal_record.js"></script>
</body>

</html>